<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jordan Wilheim">
<meta name="dcterms.date" content="2023-08-16">
<meta name="description" content="An practical example of bootstrapping in python.">

<title>snakes on a hyperplane - Bootstrapping Confidence</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">snakes on a hyperplane</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Bootstrapping Confidence</h1>
                  <div>
        <div class="description">
          An practical example of bootstrapping in python.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">analysis</div>
                <div class="quarto-category">data viz</div>
                <div class="quarto-category">statistics</div>
                <div class="quarto-category">machine learning</div>
                <div class="quarto-category">python</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jordan Wilheim </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 16, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#intro-to-bootstrapping" id="toc-intro-to-bootstrapping" class="nav-link active" data-scroll-target="#intro-to-bootstrapping">Intro To Bootstrapping</a></li>
  <li><a href="#modeling-procedure" id="toc-modeling-procedure" class="nav-link" data-scroll-target="#modeling-procedure">Modeling Procedure</a></li>
  <li><a href="#modeling-bootstrapping" id="toc-modeling-bootstrapping" class="nav-link" data-scroll-target="#modeling-bootstrapping">Modeling + Bootstrapping</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="intro-to-bootstrapping" class="level2">
<h2 class="anchored" data-anchor-id="intro-to-bootstrapping">Intro To Bootstrapping</h2>
<p>Bootstrapping a non-parametric method method of sampling from a sample to help estimate a population parameter.</p>
<p>Once we generate many bootstrapped samples, we can apply a calculation to create an estimate for each, which the distribution can be analyzed.</p>
<p>This is a great alternative when independant samplings are unavailable.</p>
</section>
<section id="modeling-procedure" class="level2">
<h2 class="anchored" data-anchor-id="modeling-procedure">Modeling Procedure</h2>
<p>For each region:</p>
<ol type="1">
<li>Create a train and test dataset</li>
<li>Split the data into a training set and validation set at a ratio of 75:25.</li>
<li>Train the model and make predictions for the validation set.</li>
<li>Save the predictions and true values for the validation set.</li>
<li>Print the average volume of predicted reserves and model RMSE.</li>
<li>Analyze the results.</li>
</ol>
</section>
<section id="modeling-bootstrapping" class="level2">
<h2 class="anchored" data-anchor-id="modeling-bootstrapping">Modeling + Bootstrapping</h2>
<div class="cell" data-execution_count="1">
<details>
<summary>Import Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> make_pipeline</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.utils <span class="im">import</span> resample</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>()</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>state <span class="op">=</span> np.random.RandomState(<span class="dv">42</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="8">
<details open="">
<summary>Data Import Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>filenames <span class="op">=</span> [<span class="st">"geo_data_"</span> <span class="op">+</span> <span class="bu">str</span>(n) <span class="op">+</span> <span class="st">".csv"</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>)]</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>regions <span class="op">=</span> [<span class="st">"g1"</span>, <span class="st">"g2"</span>, <span class="st">"g3"</span>]</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>region_dfs <span class="op">=</span> {</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    region: pd.read_csv(Path(<span class="st">"data"</span>) <span class="op">/</span> fn) <span class="cf">for</span> fn, region <span class="kw">in</span> <span class="bu">zip</span>(filenames, regions)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>region_dfs.get(<span class="st">'g1'</span>).head().style</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<style type="text/css">
</style>

<table id="T_49b10" data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_49b10_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">id</th>
<th id="T_49b10_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">f0</th>
<th id="T_49b10_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">f1</th>
<th id="T_49b10_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">f2</th>
<th id="T_49b10_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">product</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_49b10_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">0</td>
<td id="T_49b10_row0_col0" class="data row0 col0">txEyH</td>
<td id="T_49b10_row0_col1" class="data row0 col1">0.705745</td>
<td id="T_49b10_row0_col2" class="data row0 col2">-0.497823</td>
<td id="T_49b10_row0_col3" class="data row0 col3">1.221170</td>
<td id="T_49b10_row0_col4" class="data row0 col4">105.280062</td>
</tr>
<tr class="even">
<td id="T_49b10_level0_row1" class="row_heading level0 row1" data-quarto-table-cell-role="th">1</td>
<td id="T_49b10_row1_col0" class="data row1 col0">2acmU</td>
<td id="T_49b10_row1_col1" class="data row1 col1">1.334711</td>
<td id="T_49b10_row1_col2" class="data row1 col2">-0.340164</td>
<td id="T_49b10_row1_col3" class="data row1 col3">4.365080</td>
<td id="T_49b10_row1_col4" class="data row1 col4">73.037750</td>
</tr>
<tr class="odd">
<td id="T_49b10_level0_row2" class="row_heading level0 row2" data-quarto-table-cell-role="th">2</td>
<td id="T_49b10_row2_col0" class="data row2 col0">409Wp</td>
<td id="T_49b10_row2_col1" class="data row2 col1">1.022732</td>
<td id="T_49b10_row2_col2" class="data row2 col2">0.151990</td>
<td id="T_49b10_row2_col3" class="data row2 col3">1.419926</td>
<td id="T_49b10_row2_col4" class="data row2 col4">85.265647</td>
</tr>
<tr class="even">
<td id="T_49b10_level0_row3" class="row_heading level0 row3" data-quarto-table-cell-role="th">3</td>
<td id="T_49b10_row3_col0" class="data row3 col0">iJLyR</td>
<td id="T_49b10_row3_col1" class="data row3 col1">-0.032172</td>
<td id="T_49b10_row3_col2" class="data row3 col2">0.139033</td>
<td id="T_49b10_row3_col3" class="data row3 col3">2.978566</td>
<td id="T_49b10_row3_col4" class="data row3 col4">168.620776</td>
</tr>
<tr class="odd">
<td id="T_49b10_level0_row4" class="row_heading level0 row4" data-quarto-table-cell-role="th">4</td>
<td id="T_49b10_row4_col0" class="data row4 col0">Xdl7t</td>
<td id="T_49b10_row4_col1" class="data row4 col1">1.988431</td>
<td id="T_49b10_row4_col2" class="data row4 col2">0.155413</td>
<td id="T_49b10_row4_col3" class="data row4 col3">4.751769</td>
<td id="T_49b10_row4_col4" class="data row4 col4">154.036647</td>
</tr>
</tbody>
</table>
<p>Example of the data used to model and bootstrap</p>
</div>
</div>
<div class="cell" data-execution_count="4">
<details open="">
<summary>Bootstrap Function Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>price_per_1k_b <span class="op">=</span> <span class="dv">4500</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>cost_of_well <span class="op">=</span> <span class="dv">500_000</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>budget_per_200_wells <span class="op">=</span> cost_of_well <span class="op">*</span> <span class="dv">200</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bootstrap_profit(outputs, n, top, profits_data):</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        outputs.sample(n, random_state<span class="op">=</span>state, replace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        .<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.sort_values().tail(top).index)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        .applymap(<span class="kw">lambda</span> x: profits_data.at[x])</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        .<span class="bu">sum</span>()</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bootstrap_top_sum(outputs, iters<span class="op">=</span><span class="dv">10000</span>, n<span class="op">=</span><span class="dv">500</span>, top<span class="op">=</span><span class="dv">200</span>, profits_data<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> iters <span class="op">&lt;</span> <span class="dv">1_000_000</span>  <span class="co"># Don't crash your machine</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        bootstrap_profit(outputs, n<span class="op">=</span>n, top<span class="op">=</span>top, profits_data<span class="op">=</span>profits_data)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="bu">iter</span> <span class="kw">in</span> <span class="bu">range</span>(iters)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="5">
<details open="">
<summary>Model Training Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>metrics_df_list <span class="op">=</span> []</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> region, oil_data <span class="kw">in</span> region_dfs.items():</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    X_train, X_val, y_train, y_val <span class="op">=</span> train_test_split(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        oil_data.drop([<span class="st">"id"</span>, <span class="st">"product"</span>], axis<span class="op">=</span><span class="dv">1</span>),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        oil_data[<span class="st">"product"</span>],</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        random_state<span class="op">=</span>state,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> LinearRegression()</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    model.fit(X_train, y_train)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    mean_model <span class="op">=</span> [np.mean(y_train)] <span class="op">*</span> y_val.shape[<span class="dv">0</span>]</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    preds <span class="op">=</span> pd.Series(</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        model.predict(X_val), index<span class="op">=</span>X_val.index, name<span class="op">=</span><span class="st">"linear_model_choice"</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    mean_preds <span class="op">=</span> preds.mean()</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    rmse_linear <span class="op">=</span> mean_squared_error(y_val, preds) <span class="op">**</span> (<span class="fl">0.5</span>)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    rmse_mean_baseline <span class="op">=</span> mean_squared_error(y_val, mean_model) <span class="op">**</span> (<span class="fl">0.5</span>)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    well_rev <span class="op">=</span> mean_preds <span class="op">*</span> price_per_1k_b</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"""</span><span class="sc">{</span>region<span class="sc">}</span><span class="ss">:</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="ss">        Linear Model RMSE of </span><span class="sc">{</span>rmse_linear<span class="sc">:.2f}</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="ss">        Mean Model RMSE of </span><span class="sc">{</span>rmse_mean_baseline<span class="sc">:.2f}</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="ss">        """</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    [<span class="bu">print</span>(<span class="ss">f"Feature f</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> coefficient is: </span><span class="sc">{</span>model<span class="sc">.</span>coef_[i]<span class="sc">:.2f}</span><span class="ss">"</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>)]</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">""</span>)</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    shuffled_index <span class="op">=</span> np.random.choice(y_val.index.array, y_val.shape[<span class="dv">0</span>], replace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    shuffled_targets <span class="op">=</span> y_val.copy().rename(<span class="st">"random_choice"</span>)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    shuffled_targets.index <span class="op">=</span> shuffled_index</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    preds_target_df <span class="op">=</span> pd.concat(</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>        [y_val.rename(<span class="st">"perfect_choice"</span>), shuffled_targets, preds], axis<span class="op">=</span><span class="dv">1</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    profits_data <span class="op">=</span> y_val.mul(price_per_1k_b).subtract(cost_of_well)</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    metrics_df <span class="op">=</span> pd.concat(</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>        bootstrap_top_sum(outputs<span class="op">=</span>preds_target_df, profits_data<span class="op">=</span>profits_data)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    metrics_df.index.name <span class="op">=</span> <span class="st">"model_type"</span></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    metrics_df_list.append(</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>        metrics_df.rename(<span class="st">"profit"</span>).reset_index().assign(region<span class="op">=</span>region)</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>profit_region_df <span class="op">=</span> pd.concat(metrics_df_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>g1:
        Linear Model RMSE of 37.76
        Mean Model RMSE of 44.28
        
Feature f0 coefficient is: 3.83
Feature f1 coefficient is: -14.26
Feature f2 coefficient is: 6.59

g2:
        Linear Model RMSE of 0.90
        Mean Model RMSE of 46.00
        
Feature f0 coefficient is: -0.14
Feature f1 coefficient is: -0.02
Feature f2 coefficient is: 26.95

g3:
        Linear Model RMSE of 40.18
        Mean Model RMSE of 44.91
        
Feature f0 coefficient is: -0.07
Feature f1 coefficient is: -0.08
Feature f2 coefficient is: 5.73
</code></pre>
</div>
</div>
<p>Running a linear model for each region indicates a few things:</p>
<ol type="1">
<li><p>Our linear model is very effective in a single region: <code>g2</code>. Regions <code>g1</code> and <code>g3</code> have much smaller benefit from using a linear model over a simple mean estimate (consider this a reasonable baseline). If we considered these other regions potentially very profitable, we may want to try other models and determine if there’s an effective way of predicting the target.</p></li>
<li><p>Region <code>g2</code> targets can be predicted very effectively with a linear model, specifically using the <code>f2</code> feature.</p></li>
</ol>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<p>Based on the RMSE values for each region shown above, It’s clear that a linear model is much less error prone in the <em>g2</em> region. Given this information, the model will likely have a better chance at accurately predicting profitable wells.</p>
<p>The question now is: Can we use this information to estimate the profit and loss of future projects for each region? This is where the bootstrap comes in to <em>simulate</em> sampling from the population of wells for each region.</p>
<p>In order to calculate profit, we had generated bootstrapped samples, picked the top choices predicted from our model, then used and converted the true volumes to profit in millions, subtracting the cost to develop.</p>
<div class="cell" data-execution_count="6">
<details>
<summary>Table Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>profit_region_df.groupby([<span class="st">"model_type"</span>, <span class="st">"region"</span>]).describe()[<span class="st">"profit"</span>].drop(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>[<span class="st">"count"</span>]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>).divide(<span class="fl">1e6</span>).style.background_gradient(axis<span class="op">=</span><span class="dv">0</span>).<span class="bu">format</span>(<span class="st">"</span><span class="sc">{:.2f}</span><span class="st">"</span>).set_caption(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Bootstrapped Profit Summary Statistics (USD Millions)"</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="6">
<style type="text/css">
#T_7feeb_row0_col0, #T_7feeb_row0_col4, #T_7feeb_row1_col6, #T_7feeb_row4_col6 {
  background-color: #2c89bd;
  color: #f1f1f1;
}
#T_7feeb_row0_col1 {
  background-color: #3790c0;
  color: #f1f1f1;
}
#T_7feeb_row0_col2, #T_7feeb_row2_col3 {
  background-color: #308cbe;
  color: #f1f1f1;
}
#T_7feeb_row0_col3, #T_7feeb_row2_col5 {
  background-color: #2d8abd;
  color: #f1f1f1;
}
#T_7feeb_row0_col5, #T_7feeb_row1_col0, #T_7feeb_row1_col4, #T_7feeb_row1_col5, #T_7feeb_row4_col4, #T_7feeb_row4_col5 {
  background-color: #2a88bc;
  color: #f1f1f1;
}
#T_7feeb_row0_col6, #T_7feeb_row1_col2, #T_7feeb_row4_col2 {
  background-color: #2383ba;
  color: #f1f1f1;
}
#T_7feeb_row1_col1 {
  background-color: #f5eef6;
  color: #000000;
}
#T_7feeb_row1_col3, #T_7feeb_row4_col0, #T_7feeb_row4_col3 {
  background-color: #2987bc;
  color: #f1f1f1;
}
#T_7feeb_row2_col0, #T_7feeb_row2_col4 {
  background-color: #2f8bbe;
  color: #f1f1f1;
}
#T_7feeb_row2_col1 {
  background-color: #157ab5;
  color: #f1f1f1;
}
#T_7feeb_row2_col2 {
  background-color: #4897c4;
  color: #f1f1f1;
}
#T_7feeb_row2_col6 {
  background-color: #2182b9;
  color: #f1f1f1;
}
#T_7feeb_row3_col0, #T_7feeb_row3_col3, #T_7feeb_row3_col4, #T_7feeb_row3_col5 {
  background-color: #03446a;
  color: #f1f1f1;
}
#T_7feeb_row3_col1, #T_7feeb_row7_col0, #T_7feeb_row7_col2, #T_7feeb_row7_col3, #T_7feeb_row7_col4, #T_7feeb_row7_col5, #T_7feeb_row7_col6 {
  background-color: #fff7fb;
  color: #000000;
}
#T_7feeb_row3_col2 {
  background-color: #023f64;
  color: #f1f1f1;
}
#T_7feeb_row3_col6 {
  background-color: #034267;
  color: #f1f1f1;
}
#T_7feeb_row4_col1 {
  background-color: #f5eff6;
  color: #000000;
}
#T_7feeb_row5_col0, #T_7feeb_row5_col2, #T_7feeb_row5_col3, #T_7feeb_row5_col4, #T_7feeb_row5_col5, #T_7feeb_row5_col6, #T_7feeb_row7_col1 {
  background-color: #023858;
  color: #f1f1f1;
}
#T_7feeb_row5_col1 {
  background-color: #f8f1f8;
  color: #000000;
}
#T_7feeb_row6_col0, #T_7feeb_row6_col3, #T_7feeb_row6_col4 {
  background-color: #b8c6e0;
  color: #000000;
}
#T_7feeb_row6_col1 {
  background-color: #045c90;
  color: #f1f1f1;
}
#T_7feeb_row6_col2 {
  background-color: #c0c9e2;
  color: #000000;
}
#T_7feeb_row6_col5 {
  background-color: #b7c5df;
  color: #000000;
}
#T_7feeb_row6_col6, #T_7feeb_row8_col3 {
  background-color: #a9bfdc;
  color: #000000;
}
#T_7feeb_row8_col0, #T_7feeb_row8_col4 {
  background-color: #a8bedc;
  color: #000000;
}
#T_7feeb_row8_col1 {
  background-color: #045687;
  color: #f1f1f1;
}
#T_7feeb_row8_col2 {
  background-color: #b5c4df;
  color: #000000;
}
#T_7feeb_row8_col5 {
  background-color: #a7bddb;
  color: #000000;
}
#T_7feeb_row8_col6 {
  background-color: #a4bcda;
  color: #000000;
}
</style>

<table id="T_7feeb" data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Bootstrapped Profit Summary Statistics (USD Millions)</caption>
<thead>
<tr class="header">
<th class="blank" data-quarto-table-cell-role="th">&nbsp;</th>
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_7feeb_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">mean</th>
<th id="T_7feeb_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">std</th>
<th id="T_7feeb_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">min</th>
<th id="T_7feeb_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">25%</th>
<th id="T_7feeb_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">50%</th>
<th id="T_7feeb_level0_col5" class="col_heading level0 col5" data-quarto-table-cell-role="th">75%</th>
<th id="T_7feeb_level0_col6" class="col_heading level0 col6" data-quarto-table-cell-role="th">max</th>
</tr>
<tr class="odd">
<th class="index_name level0" data-quarto-table-cell-role="th">model_type</th>
<th class="index_name level1" data-quarto-table-cell-role="th">region</th>
<th class="blank col0" data-quarto-table-cell-role="th">&nbsp;</th>
<th class="blank col1" data-quarto-table-cell-role="th">&nbsp;</th>
<th class="blank col2" data-quarto-table-cell-role="th">&nbsp;</th>
<th class="blank col3" data-quarto-table-cell-role="th">&nbsp;</th>
<th class="blank col4" data-quarto-table-cell-role="th">&nbsp;</th>
<th class="blank col5" data-quarto-table-cell-role="th">&nbsp;</th>
<th class="blank col6" data-quarto-table-cell-role="th">&nbsp;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="3" id="T_7feeb_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">linear_model_choice</td>
<td id="T_7feeb_level1_row0" class="row_heading level1 row0" data-quarto-table-cell-role="th">g1</td>
<td id="T_7feeb_row0_col0" class="data row0 col0">4.08</td>
<td id="T_7feeb_row0_col1" class="data row0 col1">2.60</td>
<td id="T_7feeb_row0_col2" class="data row0 col2">-5.47</td>
<td id="T_7feeb_row0_col3" class="data row0 col3">2.28</td>
<td id="T_7feeb_row0_col4" class="data row0 col4">4.10</td>
<td id="T_7feeb_row0_col5" class="data row0 col5">5.84</td>
<td id="T_7feeb_row0_col6" class="data row0 col6">13.42</td>
</tr>
<tr class="even">
<td id="T_7feeb_level1_row1" class="row_heading level1 row1" data-quarto-table-cell-role="th">g2</td>
<td id="T_7feeb_row1_col0" class="data row1 col0">4.49</td>
<td id="T_7feeb_row1_col1" class="data row1 col1">2.06</td>
<td id="T_7feeb_row1_col2" class="data row1 col2">-3.17</td>
<td id="T_7feeb_row1_col3" class="data row1 col3">3.11</td>
<td id="T_7feeb_row1_col4" class="data row1 col4">4.48</td>
<td id="T_7feeb_row1_col5" class="data row1 col5">5.85</td>
<td id="T_7feeb_row1_col6" class="data row1 col6">11.93</td>
</tr>
<tr class="odd">
<td id="T_7feeb_level1_row2" class="row_heading level1 row2" data-quarto-table-cell-role="th">g3</td>
<td id="T_7feeb_row2_col0" class="data row2 col0">3.64</td>
<td id="T_7feeb_row2_col1" class="data row2 col1">2.68</td>
<td id="T_7feeb_row2_col2" class="data row2 col2">-8.81</td>
<td id="T_7feeb_row2_col3" class="data row2 col3">1.81</td>
<td id="T_7feeb_row2_col4" class="data row2 col4">3.68</td>
<td id="T_7feeb_row2_col5" class="data row2 col5">5.46</td>
<td id="T_7feeb_row2_col6" class="data row2 col6">13.73</td>
</tr>
<tr class="even">
<td rowspan="3" id="T_7feeb_level0_row3" class="row_heading level0 row3" data-quarto-table-cell-role="th">perfect_choice</td>
<td id="T_7feeb_level1_row3" class="row_heading level1 row3" data-quarto-table-cell-role="th">g1</td>
<td id="T_7feeb_row3_col0" class="data row3 col0">23.76</td>
<td id="T_7feeb_row3_col1" class="data row3 col1">1.99</td>
<td id="T_7feeb_row3_col2" class="data row3 col2">16.68</td>
<td id="T_7feeb_row3_col3" class="data row3 col3">22.40</td>
<td id="T_7feeb_row3_col4" class="data row3 col4">23.73</td>
<td id="T_7feeb_row3_col5" class="data row3 col5">25.13</td>
<td id="T_7feeb_row3_col6" class="data row3 col6">30.97</td>
</tr>
<tr class="odd">
<td id="T_7feeb_level1_row4" class="row_heading level1 row4" data-quarto-table-cell-role="th">g2</td>
<td id="T_7feeb_row4_col0" class="data row4 col0">4.51</td>
<td id="T_7feeb_row4_col1" class="data row4 col1">2.06</td>
<td id="T_7feeb_row4_col2" class="data row4 col2">-3.16</td>
<td id="T_7feeb_row4_col3" class="data row4 col3">3.13</td>
<td id="T_7feeb_row4_col4" class="data row4 col4">4.49</td>
<td id="T_7feeb_row4_col5" class="data row4 col5">5.86</td>
<td id="T_7feeb_row4_col6" class="data row4 col6">11.93</td>
</tr>
<tr class="even">
<td id="T_7feeb_level1_row5" class="row_heading level1 row5" data-quarto-table-cell-role="th">g3</td>
<td id="T_7feeb_row5_col0" class="data row5 col0">26.72</td>
<td id="T_7feeb_row5_col1" class="data row5 col1">2.04</td>
<td id="T_7feeb_row5_col2" class="data row5 col2">18.58</td>
<td id="T_7feeb_row5_col3" class="data row5 col3">25.36</td>
<td id="T_7feeb_row5_col4" class="data row5 col4">26.72</td>
<td id="T_7feeb_row5_col5" class="data row5 col5">28.11</td>
<td id="T_7feeb_row5_col6" class="data row5 col6">33.32</td>
</tr>
<tr class="odd">
<td rowspan="3" id="T_7feeb_level0_row6" class="row_heading level0 row6" data-quarto-table-cell-role="th">random_choice</td>
<td id="T_7feeb_level1_row6" class="row_heading level1 row6" data-quarto-table-cell-role="th">g1</td>
<td id="T_7feeb_row6_col0" class="data row6 col0">-17.05</td>
<td id="T_7feeb_row6_col1" class="data row6 col1">2.83</td>
<td id="T_7feeb_row6_col2" class="data row6 col2">-28.09</td>
<td id="T_7feeb_row6_col3" class="data row6 col3">-18.96</td>
<td id="T_7feeb_row6_col4" class="data row6 col4">-17.07</td>
<td id="T_7feeb_row6_col5" class="data row6 col5">-15.11</td>
<td id="T_7feeb_row6_col6" class="data row6 col6">-5.43</td>
</tr>
<tr class="even">
<td id="T_7feeb_level1_row7" class="row_heading level1 row7" data-quarto-table-cell-role="th">g2</td>
<td id="T_7feeb_row7_col0" class="data row7 col0">-37.93</td>
<td id="T_7feeb_row7_col1" class="data row7 col1">2.97</td>
<td id="T_7feeb_row7_col2" class="data row7 col2">-48.10</td>
<td id="T_7feeb_row7_col3" class="data row7 col3">-39.93</td>
<td id="T_7feeb_row7_col4" class="data row7 col4">-37.87</td>
<td id="T_7feeb_row7_col5" class="data row7 col5">-35.97</td>
<td id="T_7feeb_row7_col6" class="data row7 col6">-27.67</td>
</tr>
<tr class="odd">
<td id="T_7feeb_level1_row8" class="row_heading level1 row8" data-quarto-table-cell-role="th">g3</td>
<td id="T_7feeb_row8_col0" class="data row8 col0">-14.09</td>
<td id="T_7feeb_row8_col1" class="data row8 col1">2.86</td>
<td id="T_7feeb_row8_col2" class="data row8 col2">-25.97</td>
<td id="T_7feeb_row8_col3" class="data row8 col3">-15.98</td>
<td id="T_7feeb_row8_col4" class="data row8 col4">-14.10</td>
<td id="T_7feeb_row8_col5" class="data row8 col5">-12.17</td>
<td id="T_7feeb_row8_col6" class="data row8 col6">-4.42</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="7">
<details>
<summary>Plotting Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_mil_formatter(x, pos):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">str</span>(<span class="bu">round</span>(x <span class="op">/</span> <span class="fl">1e6</span>, <span class="dv">1</span>)) <span class="op">+</span> <span class="st">" million"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> sns.catplot(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>profit_region_df,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"model_type"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"profit"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    col<span class="op">=</span><span class="st">"region"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    kind<span class="op">=</span><span class="st">"box"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    order<span class="op">=</span>[<span class="st">"perfect_choice"</span>, <span class="st">"linear_model_choice"</span>, <span class="st">"random_choice"</span>],</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>g.axes[<span class="dv">0</span>][<span class="dv">0</span>].yaxis.set_major_formatter(plot_mil_formatter)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>g.axes[<span class="dv">0</span>][<span class="dv">0</span>].set_xlabel(<span class="st">""</span>)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>g.axes[<span class="dv">0</span>][<span class="dv">2</span>].set_xlabel(<span class="st">""</span>)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> g.axes[<span class="dv">0</span>]:</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    ax.axhline(<span class="dv">0</span>, ls<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">2.1</span>, color<span class="op">=</span><span class="st">"black"</span>)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="regression-with-bootstrapping_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Bootstrapped profits by estimating the impact of the linear model making choices for each region</figcaption>
</figure>
</div>
</div>
</div>
<p>The plot above indicates that region <code>g1</code> is <strong>very</strong> profitable if we were to choose the right locations for our wells, however, our model isn’t strong enough to predict us anywhere close to perfect choices for the region.</p>
<p>However, if we were to want to minimize our risk, and our linear model was our best model, <code>g2</code> would yeild us the <em>lowest risk of losing money</em>.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>The bootstrap provided a way to estimate the population distribution of profit using two different methods, and given the massive difference in profit distributions between the two model approaches in each region, it illustrates the effectiveness of our linear model to choose wells that will yield the most oil.</p>
<p>We used a random choice baseline to help quantify the effectiveness of a model over a “lack of model”.</p>
<p>I would advise development to take place within the G2 region to <em>maximize</em> profit and <em>minimize</em> risk using the top choices provided by the linear model that was trained.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>